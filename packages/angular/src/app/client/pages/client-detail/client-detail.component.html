<app-navbar></app-navbar>
<div class="wrap-body">
  <app-sidebar></app-sidebar>
  <div class="container-fluid">
    <div class="d-flex align-items-center mt-2">
    <span class="text-uppercase h4">
      <a routerLink="/client/list">Clientes</a> / <a
      [routerLink]="['/client/detail', currentClient._id]">{{ currentClient.fullName }}</a>
    </span>
      <ng-container *ngIf="currentClient.is_active">
        <button (click)="addServices()" class="btn btn-success ml-2 text-uppercase">
          <i class="fas fa-plus"></i> Servicio
        </button>
      </ng-container>
      <button
        type="button" *ngIf="!currentClient.is_active"
        (click)="deleteClient(currentClient._id)"
        class="btn btn-danger ml-2 text-uppercase"><i class="fas fa-trash-alt"></i> Borrar
      </button>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <!-- ##(Begin) Pago esperado. -->
        <div class="card mb-2">
          <div class="card-body">
            <i class="far fa-credit-card"></i>
            <span> Pago esperado: <strong>{{ expectedPayment }} SOLES / mes</strong></span>
          </div>
        </div>
        <!-- ##(End) Pago esperado. -->
        <!-- ##(Begin) Lista de servicios contratados. -->
        <!--<app-card-client-service *ngFor="let service of serviceList" [service]="service"
                                 (sendServiceList)="onEditService($event)"
                                 (sendLoadServices)="loadServices($event)">
        </app-card-client-service>-->
        <app-card-client-service></app-card-client-service>
        <app-card-client-service></app-card-client-service>
        <!-- ##(End) Lista de servicios contratados. -->
      </div>
      <div class="col-md-6">
        <!-- ##(Begin) Información del Cliente actual. -->
        <div class="card">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between">
              <span class="font-weight-bold">{{ currentClient.fullName }}</span>
              <a href="#" (click)="showClientModal($event)"><i class="fas fa-edit"></i></a>
            </div>
            <div class="border-top text-uppercase">
              <p class="my-1">
                <span class="font-weight-bold text-dark">
                <i class="fas fa-street-view"></i> Dirección: </span> {{ currentClient.fullAddress }}
              </p>
              <p class="my-1">
                <span class="font-weight-bold text-dark">
                <i class="fas fa-phone-alt"></i> Telefono: </span> {{ currentClient.phone }}
              </p>
              <p class="my-1">
                <span class="font-weight-bold text-dark">
                <i class="fas fa-envelope-open-text"></i> E-Mail: </span>
                <span class="text-lowercase">{{ currentClient.email }}</span>
              </p>
            </div>
          </div>
        </div>
        <!-- ##(End) Información Cliente. -->
        <div class="card my-2">
          <div class="card-body">
            <button type="button" (click)="addPayment()" class="btn btn-success text-uppercase mr-2">
              <i class="fas fa-file-invoice-dollar"></i> Registrar Pago
            </button>
            <button [routerLink]="['/client/payments', currentClient._id]"
                    class="btn btn-info text-uppercase mt-2 mt-sm-0">
              <i class="far fa-list-alt"></i> Lista de Pago
            </button>
          </div>
        </div>
        <!-- ##(Begin) Últimas Instalaciones -->
        <div class="card">
          <div class="card-body">
            <span class="font-weight-bold text-uppercase mb-0">Últimas Ordenes de Instalación</span>
            <div class="table-responsive">
              <table class="table table-striped mb-0">
                <tbody>
                <tr>
                  <td>
                    <div class="text-uppercase">
                      <span class="badge badge-info">Instalación</span>
                    </div>
                    <a [routerLink]="['/installation_orders/detail', 0]"
                       class="text-uppercase">Cliente Apellido / 956-454-141</a>
                    <div class="text-uppercase">
                      <span class="badge badge-primary">Pendiente</span>
                    </div>
                    <span class="d-block blockquote-footer">2021-02-02, 09:32:57 AM</span>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="text-uppercase">
                      <span class="badge badge-info">Instalación</span>
                    </div>
                    <a [routerLink]="['/installation_orders/detail', 0]"
                       class="text-uppercase">Cliente Apellido / 956-454-141</a>
                    <div class="text-uppercase">
                      <span class="badge badge-warning">En Proceso</span>
                    </div>
                    <span class="d-block blockquote-footer">2021-02-02, 09:32:57 AM</span>
                  </td>
                </tr>
                </tbody>
              </table>
            </div><!-- //.table-responsive -->
          </div>
        </div>
        <!-- ##(Begin) Últimas Instalaciones -->
      </div>
    </div>
    <!-- // Components -->
    <app-client-form-modal
      [title]="titleModal"
      [client]="currentClient"
      (updateClientEvent)="updateClient($event)">
    </app-client-form-modal>

    <app-add-client-service
      [title]="titleServiceModal"
      [clientId]="currentClient._id"
      [service]="service"
      (sendService)="setService($event)"
      (sendDeleteService)="deleteService($event)">
    </app-add-client-service>

    <!--<app-payment-modal
      [title]="titlePaymentModal"
      [client]="client"
      [serviceList]="serviceList"
      [payment]="payment"
      [currentService]="currentService"
      (sendPrintReceipt)="setPrintReceipt($event)"
      (sendPayment)="setPayment($event)">
    </app-payment-modal>-->
  </div>
</div>
