<app-navbar></app-navbar>
<div class="wrap-body">
  <app-sidebar></app-sidebar>
  <div class="container-fluid">
    <div class="d-flex align-items-center mt-2">
  <span class="text-uppercase"><a routerLink="/client/list">Clientes</a> /<a
    [routerLink]="['/client/detail', client._id]">{{ client.fullName }}</a></span>
      <ng-container *ngIf="client.is_active">
        <button (click)="addServices()" class="btn btn-success btn-sm ml-2 text-uppercase">
          <i class="fas fa-plus"></i> Servicio
        </button>
      </ng-container>
      <ng-container *ngIf="isAdmin">
        <button type="button" *ngIf="!client.is_active" (click)="onDeleteClient()"
                class="btn btn-danger btn-sm ml-2 text-uppercase">
          <i class="fas fa-trash-alt"></i> Borrar
        </button>
      </ng-container>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <app-card-expected-payment [expectedPayment]="expectedPayment">
        </app-card-expected-payment>
        <app-card-client-service *ngFor="let service of serviceList" [service]="service"
                                 (sendServiceList)="onEditService($event)"
                                 (sendLoadServices)="loadServices($event)">
        </app-card-client-service>
      </div>
      <div class="col-md-6">
        <app-card-client-detail [client]="client"></app-card-client-detail>
        <div class="card my-2">
          <div class="card-body">
            <button type="button" (click)="addPayment()" class="btn btn-success text-uppercase mr-2">
              <i class="fas fa-file-invoice-dollar"></i> Registrar Pago
            </button>
            <button [routerLink]="['/client/payments', client._id]" class="btn btn-info text-uppercase mt-2 mt-sm-0">
              <i class="far fa-list-alt"></i> Lista de Pago
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- // Components -->
    <app-client-form-modal
      [title]="titleModal"
      [client]="client"
      [editMode]="editMode"
      (sendClient)="setClient($event)">
    </app-client-form-modal>

    <app-add-client-service
      [title]="titleServiceModal"
      [clientId]="client._id"
      [service]="service"
      (sendService)="setService($event)"
      (sendDeleteService)="deleteService($event)">
    </app-add-client-service>

    <app-payment-modal
      [title]="titlePaymentModal"
      [client]="client"
      [serviceList]="serviceList"
      [payment]="payment"
      [currentService]="currentService"
      (sendPrintReceipt)="setPrintReceipt($event)"
      (sendPayment)="setPayment($event)">
    </app-payment-modal>
  </div>
</div>
