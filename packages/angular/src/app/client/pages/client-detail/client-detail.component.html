<app-navbar></app-navbar>
<div class="wrap-body">
  <app-sidebar></app-sidebar>
  <div class="container-fluid">
    <div class="d-flex align-items-center mt-2">
    <span class="text-uppercase h4 mb-0">
      <a [routerLink]="['/client/detail', currentClient._id]" class="me-2">{{ currentClient.fullName }}</a>
    </span>
      <button (click)="addServiceModalClick()" class="btn btn-success text-uppercase me-2">
        <i class="fas fa-plus"></i> Servicio
      </button>
      <button type="button" (click)="deleteClientClick()" class="btn btn-danger text-uppercase">
        <i class="fas fa-trash-alt"></i> Borrar
      </button>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <!-- ##(Begin) Lista de servicios contratados. -->
        <app-card-client-service
          *ngFor="let service of serviceList"
          [currentService]="service"
          (sendIdService)="editServiceModalClick($event)">
        </app-card-client-service>
        <!-- ##(End) Lista de servicios contratados. -->
      </div>
      <div class="col-md-6">
        <!-- ##(Begin) Información del Cliente actual. -->
        <div class="card mb-2">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between">
              <span class="fw-bold">{{ currentClient.fullName }}</span>
              <a href="#" (click)="editClientModalClick($event)"><i class="fas fa-edit"></i></a>
            </div>
            <div class="border-top text-uppercase">
              <p class="my-1">
                <span class="fw-bold">
                <i class="fas fa-street-view"></i> Dirección: </span> {{ currentClient.fullAddress }}
              </p>
              <p class="my-1">
                <span class="fw-bold">
                <i class="fas fa-phone-alt"></i> Telefono: </span> {{ currentClient.phone }}
              </p>
              <p class="my-1">
                <span class="fw-bold">
                <i class="fas fa-envelope-open-text"></i> E-Mail: </span>
                <span class="text-lowercase">{{ currentClient.email }}</span>
              </p>
            </div>
          </div>
        </div>
        <!-- ##(End) Información Cliente. -->
        <!-- ##(Begin) Últimas Instalaciones -->
        <div class="card">
          <div class="card-body">
            <span class="fw-bold text-uppercase mb-0">Últimas Ordenes de Trabajo</span>
            <div class="table-responsive">
              <table class="table table-striped mb-0">
                <tbody>
                <tr *ngFor="let order of installationOrderList">
                  <td>
                    <a [routerLink]="['/work_orders/detail', order._id]"
                       class="text-uppercase">{{order.address}}</a>
                    <div *ngIf="order.description" class="card px-2">{{order.description}}</div>
                    <div class="d-flex">
                      <div class="text-uppercase me-2">
                        <span class="badge bg-info">{{order.typeTask}}</span>
                      </div>
                      <div class="text-uppercase">
                        <span *ngIf="order.statusOrder === 'PENDIENTE'"
                              class="badge bg-primary">{{order.statusOrder}}</span>
                        <span *ngIf="order.statusOrder === 'EN PROCESO'"
                              class="badge bg-warning">{{order.statusOrder}}</span>
                        <span *ngIf="order.statusOrder === 'FINALIZADO'"
                              class="badge bg-success">{{order.statusOrder}}</span>
                      </div>
                    </div>
                    <span class="blockquote-footer">{{order.createdAt}}</span>
                  </td>
                </tr>
                </tbody>
              </table>
            </div><!-- //.table-responsive -->
          </div>
        </div>
        <!-- ##(Begin) Últimas Instalaciones -->
      </div>
    </div>
    <!-- // Components -->
    <app-client-form-modal
      [title]="titleClient"
      [currentClient]="currentClient"
      (hideModal)="updateClient($event)">
    </app-client-form-modal>
    <app-service-modal
      [title]="titleService"
      [currentService]="currentService"
      (hideModal)="hideServiceModal($event)">
    </app-service-modal>
  </div>
</div>
