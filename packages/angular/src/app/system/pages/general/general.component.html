<app-navbar></app-navbar>
<div class="wrap-body">
  <app-sidebar></app-sidebar>
  <div class="container-fluid">
    <!-- ##(Begin) Content -->
    <nav class="mt-2">
      <div class="nav nav-tabs" role="tablist">
        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#nav-general"
                type="button" role="tab" aria-selected="true">
          <i class="fas fa-info-circle"></i><span class="text-uppercase ms-1">Información general</span>
        </button>
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-application"
                type="button" role="tab" aria-selected="false">
          <i class="fas fa-rocket"></i><span class="text-uppercase ms-1">Aplicaciones</span>
        </button>
      </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
      <div class="tab-pane fade show active" id="nav-general" role="tabpanel">
        <!-- ##(Begin) General -->
        <div class="row">
          <div class="col-md-8">
            <form #generalForm="ngForm">
              <div class="card mt-2">
                <div class="card-body">
                  <div class="row mb-3">
                    <label class="col-form-label col-2 text-end fw-bold">R.U.C.</label>
                    <div class="col-4">
                      <input type="text" [(ngModel)]="info.ruc" name="ruc" class="form-control">
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label class="col-form-label col-2 text-end fw-bold">Razon Social</label>
                    <div class="col-10">
                      <input type="text" [(ngModel)]="info.company" name="company" class="form-control">
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label class="col-form-label col-2 text-end fw-bold">Dirección</label>
                    <div class="col-10">
                      <input type="text" [(ngModel)]="info.fullAddress" name="fullAddress" class="form-control">
                    </div>
                  </div>
                  <div class="row">
                    <label class="col-form-label col-2 text-end fw-bold">Telefono</label>
                    <div class="col-4">
                      <input type="text" [(ngModel)]="info.phone" name="phone" class="form-control">
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-2">
                <div class="card-body">
                  <div class="row">
                    <label class="col-form-label col-2 text-end fw-bold">Ancho Papel</label>
                    <div class="col-4">
                      <input type="number" name="paperWidth" [(ngModel)]="info.paperWidth" class="form-control">
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-2">
                <div class="card-body">
                  <div class="row">
                    <label class="col-form-label col-2 text-end fw-bold">Google Maps</label>
                    <div class="col-10">
                      <input type="text" name="googleMap" [(ngModel)]="info.googleMap" class="form-control">
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-2">
                <div class="card-body">
                  <ckeditor [editor]="Editor" name="legendTicket"
                            [config]="{toolbar: [
                            'bold', 'italic', 'link', 'bulletedList', 'numberedList', '|',
                            'outdent', 'indent', '|',
                            'blockQuote', 'insertTable', 'undo', 'redo']}"
                            [(ngModel)]="info.legendTicket"></ckeditor>
                </div>
              </div>
              <div class="card border-0 my-2">
                <div class="card-body py-1">
                  <button type="button" (click)="updateInfo()" class="btn btn-dark">
                    <i class="fas fa-save"></i>
                    <span class="text-uppercase ms-1">Guardar</span>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <!-- ##(End) General -->
      </div>
      <div class="tab-pane fade" id="nav-application" role="tabpanel">
        <!-- ##(Begin) Aplicaciones -->
        <button (click)="addApplicationClick()" class="btn btn-success mt-2">
          <i class="fas fa-plus"></i>
          <span class="text-uppercase ms-1">Agregar</span>
        </button>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
            <tr class="text-uppercase">
              <th>Nombre</th>
              <th>URL</th>
              <th>Token</th>
              <th></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let application of applicationList">
              <td>{{application.name}}</td>
              <td>{{application.urlBase}}</td>
              <td>{{application.token.length > 32 ?
                application.token.substr(0, 31) + '...' : application}}</td>
              <td>
                <div class="btn-opt ms-auto">
                  <button (click)="editApplicationClick(application._id)" class="btn btn-secondary btn-sm me-2">
                    <i class="fas fa-edit"></i></button>
                  <button (click)="deleteApplication(application._id)" class="btn btn-danger btn-sm">
                    <i class="fas fa-trash-alt"></i></button>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <!-- Modal Form -->
        <div class="modal fade" id="add-application-modal" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title text-uppercase">{{this.titleApplication}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-rocket"></i></span>
                    <input type="text" name="name" [(ngModel)]="applicationForm.name" class="form-control"
                           placeholder="Nombre">
                  </div>
                  <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-globe-americas"></i></span>
                    <input type="text" name="urlBase" [(ngModel)]="applicationForm.urlBase" class="form-control"
                           placeholder="URL-base">
                  </div>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                    <input type="text" name="token" [(ngModel)]="applicationForm.token" class="form-control"
                           placeholder="Token">
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary text-uppercase" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" (click)="saveApplication()" class="btn btn-primary text-uppercase">Guardar
                  Cambios
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- ##(End) Aplicaciones -->
      </div>
    </div>
    <!-- ##(End) Content -->
  </div>
</div>
